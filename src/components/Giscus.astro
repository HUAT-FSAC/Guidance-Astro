---
/**
 * Giscus è¯„è®ºç»„ä»¶
 * åŸºäº GitHub Discussions çš„è¯„è®ºç³»ç»Ÿ
 *
 * ä½¿ç”¨å‰éœ€è¦ï¼š
 * 1. åœ¨ GitHub ä»“åº“å¯ç”¨ Discussions
 * 2. å®‰è£… Giscus App: https://github.com/apps/giscus
 * 3. åœ¨ https://giscus.app è·å–é…ç½®å‚æ•°
 * 4. æ›´æ–°ä¸‹æ–¹çš„ repoã€repoIdã€categoryã€categoryId
 */

export interface Props {
    theme?: "dark" | "light" | "preferred_color_scheme";
}

const { theme = "dark" } = Astro.props;

// ============ Giscus é…ç½® ============
// è¯·åœ¨ https://giscus.app è·å–ä»¥ä¸‹å‚æ•°
const giscusConfig = {
    repo: "HUAT-FSAC/Guidance-Astro", // æ›¿æ¢ä¸ºä½ çš„ä»“åº“
    repoId: "YOUR_REPO_ID", // æ›¿æ¢ä¸ºä½ çš„ Repo ID
    category: "Announcements", // é€‰æ‹©ä¸€ä¸ª Discussion åˆ†ç±»
    categoryId: "YOUR_CATEGORY_ID", // æ›¿æ¢ä¸ºä½ çš„ Category ID
    mapping: "pathname", // æ˜ å°„æ–¹å¼
    strict: "0",
    reactionsEnabled: "1",
    emitMetadata: "0",
    inputPosition: "top",
    lang: "zh-CN",
};
---

<div class="giscus-wrapper">
    <div class="giscus-header">
        <h3>ğŸ’¬ è¯„è®ºåŒº</h3>
        <p>æ¬¢è¿ç•™ä¸‹ä½ çš„æƒ³æ³•å’Œå»ºè®®ï¼</p>
    </div>
    <script
        src="https://giscus.app/client.js"
        data-repo={giscusConfig.repo}
        data-repo-id={giscusConfig.repoId}
        data-category={giscusConfig.category}
        data-category-id={giscusConfig.categoryId}
        data-mapping={giscusConfig.mapping}
        data-strict={giscusConfig.strict}
        data-reactions-enabled={giscusConfig.reactionsEnabled}
        data-emit-metadata={giscusConfig.emitMetadata}
        data-input-position={giscusConfig.inputPosition}
        data-theme={theme}
        data-lang={giscusConfig.lang}
        crossorigin="anonymous"
        async></script>
</div>

<style>
    .giscus-wrapper {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--sl-color-gray-5);
    }

    .giscus-header {
        margin-bottom: 1.5rem;
    }

    .giscus-header h3 {
        margin: 0 0 0.5rem 0;
        font-size: 1.25rem;
        color: var(--sl-color-white);
    }

    .giscus-header p {
        margin: 0;
        font-size: 0.9rem;
        opacity: 0.7;
    }

    /* Giscus iframe æ ·å¼è°ƒæ•´ */
    .giscus {
        max-width: 100%;
    }

    .giscus-frame {
        width: 100% !important;
    }
</style>
