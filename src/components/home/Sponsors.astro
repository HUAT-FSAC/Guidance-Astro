---
import type { SponsorGroup } from "../../data/home";
import { getImageLoadingStrategy, getImageFetchPriority } from "../../utils/image-optimization";

interface Props {
    groups: SponsorGroup[];
}

const { groups } = Astro.props;

const loading = getImageLoadingStrategy(false);
const fetchPriority = getImageFetchPriority(false);
---

{
    groups.map((group) => (
        <div class="sponsor-section">
            <h3>{group.name}</h3>
            <div class="sponsor-grid">
                {group.items.map((sponsor) => (
                    <img
                        src={sponsor.logo}
                        alt={sponsor.title}
                        class="sponsor-logo"
                        title={sponsor.title}
                        loading={loading}
                        fetchpriority={fetchPriority}
                    />
                ))}
            </div>
        </div>
    ))
}

<style>
    .sponsor-section {
        position: relative;
        z-index: 2;
        text-align: center;
        margin: 4rem 0;
    }

    .sponsor-section h3 {
        opacity: 0.7;
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 1rem;
        margin-bottom: 2rem;
    }

    .sponsor-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 3rem;
        align-items: center;
    }

    .sponsor-logo {
        height: 50px;
        width: auto;
        padding: 1rem 1.5rem;
        background: var(--sl-color-gray-6, rgba(255, 255, 255, 0.03));
        border-radius: 0.75rem;
        border: 1px solid var(--sl-color-gray-5, rgba(255, 255, 255, 0.05));
        filter: grayscale(100%);
        opacity: 0.6;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    :global([data-theme="light"]) .sponsor-logo {
        background: rgba(255, 255, 255, 0.8);
        border-color: rgba(0, 0, 0, 0.1);
        filter: grayscale(100%) brightness(0.8);
    }

    .sponsor-logo:hover {
        filter: grayscale(0%);
        opacity: 1;
        transform: translateY(-5px) scale(1.05);
        background: var(--sl-color-gray-5, rgba(255, 255, 255, 0.08));
        border-color: var(--sl-color-gray-4, rgba(255, 255, 255, 0.15));
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    :global([data-theme="light"]) .sponsor-logo:hover {
        background: rgba(255, 255, 255, 1);
        border-color: rgba(0, 0, 0, 0.2);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        filter: grayscale(0%);
    }
</style>
